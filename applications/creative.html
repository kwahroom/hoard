<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Per-Word Text Checker</title>
  <style>
    .word { padding: 2px 4px; margin: 2px; border-radius: 4px; border: 1px solid transparent; }
    .correct { color: #888; background: #eee; }
    .incorrect { color: #fff; background: #e74c3c; border-color: #c0392b; }
    .pending { color: #222; background: #fffbe7; border-color: #f1c40f; }
    .container { display: flex; gap: 20px; }
    .left-panel, .right-panel { flex: 1; }
    .right-panel { border-left: 1px solid #ccc; padding-left: 20px; }
    .text-display { 
      background: #f9f9f9; 
      padding: 15px; 
      border-radius: 8px; 
      margin-bottom: 15px;
      line-height: 1.6;
      border: 1px solid #ddd;
    }
    select { 
      width: 100%; 
      padding: 8px; 
      margin-bottom: 10px; 
      border: 1px solid #ccc; 
      border-radius: 4px; 
    }
    footer {
      margin-top: 40px;
      padding: 20px 0;
      border-top: 1px solid #ddd;
      text-align: center;
      color: #666;
      font-size: 14px;
    }
    footer a {
      color: #3498db;
      text-decoration: none;
    }
    footer a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="left-panel">
      <h3>Type the text here:</h3>
      <div id="target-sentence" class="text-display"></div>
      <input id="user-input" type="text" style="width: 100%;" autocomplete="off" placeholder="Type the text here" disabled />
    </div>
    <div class="right-panel">
      <h3>Select a text to practice:</h3>
      <select id="text-selector">
        <option value="">Choose a text...</option>
        <option value="the-great-gatsby">The Great Gatsby</option>
        <option value="svensk-poesi">Svensk Poesi</option>
        <option value="shakespeare">Shakespeare Quote</option>
        <option value="dune">Dune</option>
      </select>
      <div id="full-text-display" class="text-display" style="display: none;">
        <h4>Full Text:</h4>
        <div id="full-text-content"></div>
      </div>
      <div id="result" style="margin-top: 10px;"></div>
    </div>
  </div>

  <footer>
    <p>Inspired by copywork practice. Learn more: <a href="https://herbertlui.net/write-better-faster-with-copywork/" target="_blank">Write Better, Faster with Copywork</a></p>
  </footer>

  <script>
    let words = [];
    const predefinedTexts = {
      "the-great-gatsby": `We went in. To my overwhelming surprise the living-room was deserted.
'Well, that's funny,' I exclaimed.
'What's funny?'
She turned her head as there was a light dignified knocking at the front door. I
went out and opened it. Gatsby, pale as death, with his hands plunged like
weights in his coat pockets, was standing in a puddle of water glaring tragically
into my eyes.
With his hands still in his coat pockets he stalked by me into the hall, turned
sharply as if he were on a wire, and disappeared into the living-room. It wasn't a
bit funny. Aware of the loud beating of my own heart I pulled the door to against
the increasing rain.
For half a minute there wasn't a sound. Then from the living-room I heard a sort
of choking murmur and part of a laugh, followed by Daisy's voice on a clear
artificial note:
'I certainly am awfully glad to see you again.'
A pause; it endured horribly. I had nothing to do in the hall, so I went into the
room.
Gatsby, his hands still in his pockets, was reclining against the mantelpiece in a
strained counterfeit of perfect ease, even of boredom. His head leaned back so
far that it rested against the face of a defunct mantelpiece clock, and from this
position his distraught eyes stared down at Daisy, who was sitting, frightened
but graceful, on the edge of a stiff chair.`,
      "svensk-poesi": `Han längtar, längtar och anar,
han vandrar, söker och spanar
alltjämt och överallt,
och vad han efterfiker
det skymtar, lockar och viker
i skiftande gestalt.

En blomma blå, som blickar
över åkerns ax och nickar
till vandraren långt ifrån,
men, innan fram han hunnit,
har sjunkit och försvunnit
bland böljande rågens strån.

En fana med gyllne ränder
som lyftes av andehänder
på kvällskyns vallar och torn.
Ett eko, tynande brutet,
från av sägensilver gjutet
fjärrklingande jägarhorn.

Ett orgelbrus, som strömmar
ur en gotisk dôm av drömmar
över drömda gator och torg.
Ett hammarslag i fjärran
från någon i tjänst hos Herran,
som bygger en framtidsborg.

Ett sus i en morgongryning
från världsoceanens dyning
kring bleknande stjärne-skär. --
Han lyss och skådar och anar.
I allt han det sökta spanar
och undrar vad det är.

Ett hav, som samlar åren.
En flod, som speglar våren
med vad flyktigt skönt den har,
och mänskovårar tvenne,
som se varann i henne
med trånande ögonpar.

Hon ilar från blomstermarker
genom höstens gula parker
och välver dess vissna blad
till havet, det mörka vida.
På havets andra sida
vad där? Han undrar vad.

Kanhända det eftertrådda
är det aldrig än förstådda
och vad ingen skall förstå;
men han måste längta och ana,
han måste vandra och spana
och söka det ändå.

Och kom han till världens ända,
dit inga vägar lända,
där Intets rike är,
han böjde sig över stupet
och stirrade in i djupet
med vemodsfullt begär.

Och lutande över stupet
han ropade ned i djupet,
som saknar återljud,
och ropet skulle fara
genom ändlöst icke-vara,
genom tigande rymder: Gud!`,
      "shakespeare": "To be or not to be, that is the question. Whether 'tis nobler in the mind to suffer the slings and arrows of outrageous fortune, or to take arms against a sea of troubles.",
      "dune": `In the week before their departure to Arrakis, when all the final scurrying about had reached a nearly unbearable frenzy, an old crone came to visit the mother of the boy, Paul.

It was a warm night at Castle Caladan, and the ancient pile of stone that had served the Atreides family as home for twenty-six generations bore that cooled-sweat feeling it acquired before a change in the weather.

The old woman was let in by the side door down the vaulted passage by Paul's room and she was allowed a moment to peer in at him where he lay in his bed.

By the half-light of a suspensor lamp, dimmed and hanging near the floor, the awakened boy could see a bulky female shape at his door, standing one step ahead of his mother. The old woman was a witch shadow—hair like matted spiderwebs, hooded 'round darkness of features, eyes like glittering jewels.

"Is he not small forhis age, Jessica?" the old woman asked. Her voice wheezed and twanged like an untuned baliset.

Paul's mother answered in her soft contralto: "The Atreides are known to start late getting their growth, Your Reverence."

"So I've heard, so I've heard," wheezed the old woman. "Yet he's already fifteen."

"Yes, Your Reverence."

"He's awake and listening to us," said the old woman. "Sly little rascal." She chuckled. "But royalty has need of slyness. And if he's really the Kwisatz Haderach ... well...."

Within the shadows of his bed, Paul held his eyes open to mere slits. Two bird-bright ovals—the eyes of the old woman—seemed to expand and glow as they stared into his.

"Sleep well, you sly little rascal," said the old woman. "Tomorrow you'll need all your faculties to meet my gom jabbar."

And she was gone, pushing his mother out, closing the door with a solid thump.

Paul lay awake wondering: _What's a gom jabbar?_

In all the upset during this time of change, the old woman was the strangest thing he had seen.

_Your Reverence._

And the way she called his mother Jessica like a common serving wench instead of what she was—a Bene Gesserit Lady, a duke's concubine and mother of the ducal heir.

_Is a gom jabbar something of Arrakis I must know before we go there?_ he wondered.

He mouthed her strange words: _Gom jabbar ... Kwisatz Haderach_.

There had been so many things to learn. Arrakis would be a place so different from Caladan that Paul's mind whirled with the new knowledge. _Arrakis—Dune—Desert Planet_.

Thufir Hawat, his father's Master of Assassins, had explained it: their mortal enemies, the Harkonnens, had been on Arrakis eighty years, holding the planet in quasi-fief under a CHOAM Company contract to mine the geriatric spice, melange. Now the Harkonnens were leaving to be replaced by the House of Atreides in fief-complete—an apparent victory for the Duke Leto. Yet, Hawat had said, this appearance contained the deadliest peril, for the Duke Leto was popular among the Great Houses of the Landsraad.

"A popular man arouses the jealousy of the powerful," Hawat had said.

_Arrakis—Dune—Desert Planet._

Paul fell asleep to dream of an Arrakeen cavern, silent people all around him moving in the dim light of glowglobes. It was solemn there and like a cathedral as he listened to a faint sound—the drip-drip-drip of water. Even while he remained in the dream, Paul knew he would remember it upon awakening. He always remembered the dreams that were predictions.

The dream faded.

Paul awoke to feel himself in the warmth of his bed—thinking ... thinking. This world of Castle Caladan, without play or companions his own age, perhaps did not deserve sadness in farewell. Dr. Yueh, his teacher, had hinted that the faufreluches class system was not rigidly guarded on Arrakis. The planet sheltered people who lived at the desert edge without caid or bashar to command them: will-o'-the-sand people called Fremen, marked down on no census of the Imperial Regate.

_Arrakis—Dune—Desert Planet._

Paul sensed his own tensions, decided to practice one of the mind-body lessons his mother had taught him. Three quick breaths triggered the responses: he fell into the floating awareness ... focusing the consciousness ... aortal dilation ... avoiding the unfocused mechanism of consciousness ... to be conscious by choice ... blood enriched and swift-flooding the overload regions ... _one does not obtain food-safety-freedom by instinct alone_ ... animal consciousness does not extend beyond the given moment nor into the idea that its victims may become extinct ... the animal destroys and does not produce ... animal pleasures remain close to sensation levels and avoid the perceptual ... the human requires a background grid through which to see his universe ... focused consciousness by choice, this forms your grid ... bodily integrity follows nerve-blood flow according to the deepest awareness of cell needs ... all things/cells/beings are impermanent ... strive for flow-permanence within....

Over and over and over within Paul's floating awareness the lesson rolled.

When dawn touched Paul's window sill with yellow light, he sensed it through closed eyelids, opened them, hearing then the renewed bustle and hurry in the castle, seeing the familiar patterned beams of his bedroom ceiling.

The hall door opened and his mother peered in, hair like shaded bronze held with black ribbon at the crown, her oval face emotionless and green eyes staring solemnly.

"You're awake," she said. "Did you sleep well?"

"Yes."

He studied the tallness of her, saw the hint of tension in her shoulders as she chose clothing for him from the closet racks. Another might have missed the tension, but she had trained him in the Bene Gesserit Way—in the minutiae of observation. She turned, holding a semiformal jacket for him. It carried the red Atreides hawk crest above the breast pocket.

"Hurry and dress," she said. "Reverend Mother is waiting."

"I dreamed of her once," Paul said. "Who is she?"

"She was my teacher at the Bene Gesserit school. Now, she's the Emperor's Truthsayer. And Paul...." She hesitated. "You must tell her about your dreams."

"I will. Is she the reason we got Arrakis?"

"We did not _get_ Arrakis." Jessica flicked dust from a pair of trousers, hung them with the jacket on the dressing stand beside his bed. "Don't keep Reverend Mother waiting."

Paul sat up, hugged his knees. "What's a gom jabbar?"

Again, the training she had given him exposed her almost invisible hesitation, a nervous betrayal he felt as fear.

Jessica crossed to the window, flung wide the draperies, stared across the river orchards toward Mount Syubi. "You'll learn about ... the gom jabbar soon enough," she said.

He heard the fear in her voice and wondered at it.

Jessica spoke without turning. "Reverend Mother is waiting in my morning room. Please hurry."

The Reverend Mother Gaius Helen Mohiam sat in a tapestried chair watching mother and son approach. Windows on each side of her overlooked the curving southern bend of the river and the green farmlands of the Atreides family holding, but the Reverend Mother ignored the view. She was feeling her age this morning, more than a little petulant. She blamed it on space travel and association with that abominable Spacing Guild and its secretive ways. But here was a mission that required personal attention from a Bene Gesserit-with-the-Sight. Even the Padishah Emperor's Truthsayer couldn't evade that responsibility when the duty call came.

_Damn that Jessica! the Reverend Mother thought. If only she'd borne us a girl as she was ordered to do!_

Jessica stopped three paces from the chair, dropped a small curtsy, a gentle flick of left hand along the line of her skirt. Paul gave the short bow his dancing master had taught—the one used "when in doubt of another's station."

The nuances of Paul's greeting were not lost on the Reverend Mother. She said: "He's a cautious one, Jessica."

Jessica's hand went to Paul's shoulder, tightened there. For a heartbeat, fear pulsed through her palm. Then she had herself under control. "Thus he has been taught, Your Reverence."

_What does she fear?_ Paul wondered.

The old woman studied Paul in one gestalten flicker: face oval like Jessica's, but strong bones ... hair: the Duke's black-black but with browline of the maternal grandfather who cannot be named, and that thin, disdainful nose; shape of directly staring green eyes: like the old Duke, the paternal grandfather who is dead.

_Now, there was a man who appreciated the power of bravura—even in death_, the Reverend Mother thought.

"Teaching is one thing," she said, "the basic ingredient is another. We shall see." The old eyes darted a hard glance at Jessica. "Leave us. I enjoin you to practice the meditation of peace."

Jessica took her hand from Paul's shoulder. "Your Reverence, I—"

"Jessica, you know it must be done."

Paul looked up at his mother, puzzled.

Jessica straightened. "Yes ... of course."

Paul looked back at the Reverend Mother. Politeness and his mother's obvious awe of this old woman argued caution. Yet he felt an angry apprehension at the fear he sensed radiating from his mother.

"Paul...." Jessica took a deep breath. "... this test you're about to receive ... it's important to me."

"Test?" He looked up at her.

"Remember that you're a duke's son," Jessica said. She whirled and strode from the room in a dry swishing of skirt. The door closed solidly behind her.

Paul faced the old woman, holding anger in check. "Does one dismiss the Lady Jessica as though she were a serving wench?"

A smile flicked the corners of the wrinkled old mouth. "The Lady Jessica _was_ my serving wench, lad, for fourteen years at school." She nodded. "And a good one, too. Now, _you_ come here!"

The command whipped out at him. Paul found himself obeying before he could think about it. _Using the Voice on me_, he thought. He stopped at her gesture, standing beside her knees.

"See this?" she asked. From the folds of her gown, she lifted a green metal cube about fifteen centimeters on a side. She turned it and Paul saw that one side was open—black and oddly frightening. No light penetrated that open blackness.

"Put your right hand in the box," she said.

Fear shot through Paul. He started to back away, but the old woman said: "Is this how you obey your mother?"

He looked up into bird-bright eyes.

Slowly, feeling the compulsions and unable to inhibit them, Paul put his hand into the box. He felt first a sense of cold as the blackness closed around his hand, then slick metal against his fingers and a prickling as though his hand were asleep.

A predatory look filled the old woman's features. She lifted her right hand away from the box and poised the hand close to the side of Paul's neck. He saw a glint of metal there and started to turn toward it.

"Stop!" she snapped.

_Using the Voice again!_ He swung his attention back to her face.

"I hold at your neck the gom jabbar," she said. "The gom jabbar, the high-handed enemy. It's a needle with a drop of poison on its tip. Ah-ah! Don't pull away or you'll feel that poison."

Paul tried to swallow in a dry throat. He could not take his attention from the seamed old face, the glistening eyes, the pale gums around silvery metal teeth that flashed as she spoke.

"A duke's son _must_ know about poisons," she said. "It's the way of our times, eh? Musky, to be poisoned in your drink. Aumas, to be poisoned in your food. The quick ones and the slow ones and the ones in between. Here's a new one for you: the gom jabbar. It kills only animals."

Pride overcame Paul's fear. "You dare suggest a duke's son is an animal?" he demanded.

"Let us say I suggest you may be human," she said. "Steady! I warn you not to try jerking away. I am old, but my hand can drive this needle into your neck before you escape me."

"Who are you?" he whispered. "How did you trick my mother into leaving me alone with you? Are you from the Harkonnens?"

"The Harkonnens? Bless us, no! Now, be silent." A dry finger touched his neck and he stilled the involuntary urge to leap away.

"Good," she said. "You pass the first test. Now, here's the way of the rest of it: If you withdraw your hand from the box you die. This is the only rule. Keep your hand in the box and live. Withdraw it and die."

Paul took a deep breath to still his trembling. "If I call out there'll be servants on you in seconds and _you'll_ die."

"Servants will not pass your mother who stands guard outside that door. Depend on it. Your mother survived this test. Now it's your turn. Be honored. We seldom administer this to men-children."

Curiosity reduced Paul's fear to a manageable level. He heard truth in the old woman's voice, no denying it. If his mother stood guard out there ... if this were truly a test.... And whatever it was, he knew himself caught in it, trapped by that hand at his neck: the gom jabbar. He recalled the response from the Litany against Fear as his mother had taught him out of the Bene Gesserit rite.

_"I must not fear. Fear is the mind-killer. Fear is the little-death that brings total obliteration. I will face my fear. I will permit it to pass over me and through me. And when it has gone past I will turn the inner eye to see its path. Where the fear has gone there will be nothing. Only I will remain."_

He felt calmness return, said: "Get on with it, old woman."
      `
    };

    function renderSentence(statuses = []) {
      const container = document.getElementById("target-sentence");
      container.innerHTML = "";
      words.forEach((word, idx) => {
        const span = document.createElement("span");
        span.textContent = word + (idx < words.length - 1 ? " " : "");
        span.className = "word " + (statuses[idx] || "");
        container.appendChild(span);
      });
    }

    // Text selector handler
    document.getElementById("text-selector").addEventListener("change", function() {
      const selectedKey = this.value;
      if (!selectedKey) {
        document.getElementById("full-text-display").style.display = "none";
        document.getElementById("user-input").disabled = true;
        return;
      }
      
      const selectedText = predefinedTexts[selectedKey];
      document.getElementById("full-text-content").textContent = selectedText;
      document.getElementById("full-text-display").style.display = "block";
      
      words = selectedText.split(/\s+/);
      renderSentence();
      document.getElementById("user-input").value = "";
      document.getElementById("result").textContent = "";
      document.getElementById("user-input").disabled = false;
      document.getElementById("user-input").focus();
    });

    // On user input, check each word
    document.getElementById("user-input").addEventListener("input", function () {
      const userInput = this.value.trim();
      const userWords = userInput.split(/\s+/);

      const statuses = words.map((word, idx) => {
        if (!userWords[idx]) return "pending";
        return userWords[idx] === word ? "correct" : "incorrect";
      });

      renderSentence(statuses);

      const allCorrect = statuses.every(status => status === "correct");
      if (allCorrect) {
        document.getElementById("result").textContent = "✅ All correct! Well done!";
      }
    });

    // Set default text on load
    window.onload = function() {
      document.getElementById("text-selector").value = "quick-fox";
      document.getElementById("text-selector").dispatchEvent(new Event('change'));
    };
  </script>
</body>
</html>
